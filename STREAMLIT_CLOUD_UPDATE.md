# Streamlit Cloud 更新部署指南

## 问题解决

### 已修复的问题
1. **NameError 变量作用域问题**: 修复了 `app.py` 中异常处理块的变量作用域问题
2. **缺失依赖包**: 添加了 `textstat` 和 `networkx` 依赖包

### 更新的文件
- `app.py`: 修复变量作用域问题
- `requirements.txt`: 添加缺失的依赖包

## 更新到 Streamlit Cloud 的步骤

### 方法一：通过 Git 推送更新（推荐）

1. **提交本地更改**
   ```bash
   git add .
   git commit -m "修复依赖包和变量作用域问题"
   ```

2. **推送到 GitHub**
   ```bash
   git push origin main
   ```

3. **自动部署**
   - Streamlit Cloud 会自动检测到更改并重新部署
   - 通常需要 2-5 分钟完成部署

### 方法二：手动重新部署

1. 登录 [Streamlit Cloud](https://share.streamlit.io/)
2. 找到你的应用
3. 点击 "Reboot app" 或 "Redeploy"

## 验证部署

### 检查要点
1. **应用启动**: 确认应用能正常启动
2. **模块导入**: 确认所有分析模块都能正常加载
3. **功能测试**: 测试各个分析功能是否正常工作

### 常见问题排查

1. **依赖包问题**
   - 检查 `requirements.txt` 是否包含所有必需的包
   - 确认包版本兼容性

2. **内存限制**
   - Streamlit Cloud 有内存限制
   - 如果数据量过大，考虑优化数据处理逻辑

3. **文件路径问题**
   - 确保所有文件路径使用相对路径
   - 检查文件名大小写是否正确

## 更新后的依赖包列表

新增的依赖包：
- `textstat>=0.7.3`: 用于文本可读性分析
- `networkx>=3.1`: 用于社交网络分析

## 监控和维护

1. **日志监控**: 定期检查 Streamlit Cloud 的应用日志
2. **性能监控**: 关注应用的响应时间和内存使用
3. **用户反馈**: 收集用户使用反馈，持续优化

## 联系支持

如果遇到部署问题：
1. 检查 Streamlit Cloud 的状态页面
2. 查看应用日志获取详细错误信息
3. 参考 Streamlit 官方文档

---

**注意**: 确保在推送前本地测试通过，避免部署失败。